<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>åƒæ—©ç®—æ•°ã‚¯ã‚¨ã‚¹ãƒˆ - 6å¹´ç”Ÿåˆ†æ•°ç‰ˆ</title>
<style>
body{font-family:Arial;text-align:center;background:#f0f8ff;margin:0;padding:20px}
.monster{font-size:80px;transition:transform 0.3s;margin:20px 0}
.monster.level-up{animation:levelUp 2s}
.monster.correct{animation:correct 1s}
.monster.wrong{animation:wrong 1s}
@keyframes levelUp{0%{transform:scale(1)}50%{transform:scale(2)rotate(180deg);color:#ff0}100%{transform:scale(1)rotate(360deg);color:gold}}
@keyframes correct{0%{transform:scale(1)}50%{transform:scale(1.3);color:#0f0}100%{transform:scale(1);color:gold}}
@keyframes wrong{0%{transform:scale(1)}25%{transform:scale(1.2)rotate(-10deg);color:#f00}50%{transform:scale(1.2)rotate(10deg);color:#f00}75%{transform:scale(1.2)rotate(-10deg);color:#f00}100%{transform:scale(1);color:#333}}
.question{font-size:24px;margin:20px;padding:20px;background:white;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
button{margin:10px;padding:12px 24px;font-size:16px;border:none;border-radius:8px;background:#4CAF50;color:white;cursor:pointer}
button:hover{background:#45a049}
.mode-btn{background:#2196f3;padding:15px 30px;font-size:18px;margin:20px}
.mode-btn:hover{background:#1976d2}
.mode-btn.practice{background:#ff9800}
.mode-btn.practice:hover{background:#f57c00}
input{font-size:18px;padding:10px;border:2px solid #ddd;border-radius:5px;margin:10px}
.status{margin:15px 0;font-size:18px}
.progress{background:#e0e0e0;border-radius:10px;margin:15px 0;height:20px;overflow:hidden}
.progress-bar{height:100%;transition:width 0.3s}
.progress-bar.practice{background:#ff9800}
.progress-bar.summary{background:#f44336}
.info{padding:15px;background:white;border-radius:10px;margin:15px 0}
.mode-info{padding:10px;margin:10px 0;border-radius:8px;font-size:16px}
.mode-info.practice{background:#fff3e0;color:#f57c00;border:2px solid #ff9800}
.mode-info.summary{background:#ffebee;color:#d32f2f;border:2px solid #f44336}
.clear-screen{background:linear-gradient(45deg,#ff9a9e,#fecfef);animation:rainbow 2s infinite}
@keyframes rainbow{0%,100%{background:linear-gradient(45deg,#ff9a9e,#fecfef)}50%{background:linear-gradient(45deg,#a8e6cf,#dcedc1)}}
.gameover{background:#ffebee;color:#d32f2f;padding:20px;border-radius:10px;margin:20px 0}
.answer-sections{display:flex;justify-content:center;gap:20px;margin:20px 0;flex-wrap:wrap}
.answer-section{background:white;border:2px solid #2196f3;border-radius:15px;padding:15px;min-width:180px}
.answer-section h3{margin:0 0 10px 0;color:#2196f3;font-size:16px}
.fraction-input{display:flex;flex-direction:column;align-items:center;gap:5px;margin:10px 0}
.fraction-input input{width:70px;text-align:center;margin:2px}
.fraction-line{width:80px;height:2px;background:#333;margin:3px 0}
.mixed-input{display:flex;align-items:center;justify-content:center;gap:8px;margin:10px 0}
.mixed-input input{width:50px;text-align:center}
.normal-input{display:flex;flex-direction:column;align-items:center;gap:10px;margin:10px 0}
.normal-input input{width:100px;text-align:center}
.unit-display{font-size:14px;font-weight:bold;color:#666;margin-top:5px}
.submit-btn{padding:12px 20px;font-size:16px;background:#4CAF50;color:white;border:none;border-radius:8px;cursor:pointer}
.submit-btn:hover{background:#45a049}
.comparison-options{display:flex;justify-content:center;gap:15px;margin:20px 0}
.comparison-btn{padding:12px 25px;font-size:16px;background:#e3f2fd;border:2px solid #2196f3;border-radius:8px;cursor:pointer}
.comparison-btn:hover{background:#2196f3;color:white}
.fraction-display{display:inline-block;text-align:center;vertical-align:middle;margin:0 5px}
.fraction-display .numerator{display:block;line-height:1.2}
.fraction-display .denominator{display:block;line-height:1.2}
.fraction-display .fraction-bar{display:block;border-top:2px solid #333;margin:2px 0;min-width:25px}
.level-indicator{display:flex;justify-content:center;gap:8px;margin:15px 0;flex-wrap:wrap}
.level-dot{width:25px;height:25px;border-radius:50%;background:#e0e0e0;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold}
.level-dot.completed{background:#4caf50;color:white}
.level-dot.current{background:#2196f3;color:white;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
.correct-answer{background:#e8f5e8;color:#2e7d32;padding:10px;border-radius:8px;margin:10px 0;font-size:16px;border:2px solid #4caf50}
</style>
</head>
<body>
<h1>ğŸ§® åƒæ—©ç®—æ•°ã‚¯ã‚¨ã‚¹ãƒˆ - 6å¹´ç”Ÿåˆ†æ•°ç‰ˆ</h1>

<div id="start">
<h2>ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
<div class="info">
<div class="mode-info practice">
<h3>ğŸ“š ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</h3>
<p>â€¢ å„ãƒ¬ãƒ™ãƒ«ã§5å•é€£ç¶šæ­£è§£ã§æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸<br>â€¢ é–“é•ãˆãŸã‚‰ãã®ãƒ¬ãƒ™ãƒ«ã®ã‚«ã‚¦ãƒ³ãƒˆãŒ0ã«æˆ»ã‚‹</p>
</div>
<div class="mode-info summary">
<h3>ğŸ¯ ã¾ã¨ã‚ãƒ¢ãƒ¼ãƒ‰</h3>
<p>â€¢ å…¨9ãƒ¬ãƒ™ãƒ«Ã—å„5å•ï¼è¨ˆ45å•ã«æŒ‘æˆ¦<br>â€¢ ä¸€å•ã§ã‚‚é–“é•ãˆã‚‹ã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</p>
</div>
</div>

<button class="mode-btn practice" onclick="selectMode('practice')">ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</button>
<button class="mode-btn" onclick="selectMode('summary')">ã¾ã¨ã‚ãƒ¢ãƒ¼ãƒ‰</button>

<div style="margin-top:30px">
<input type="number" id="grade" value="6" min="1" max="6" placeholder="å­¦å¹´">å¹´
<input type="number" id="class" min="1" max="10" placeholder="çµ„">çµ„
<input type="number" id="number" min="1" max="40" placeholder="ç•ªå·">ç•ª
</div>
</div>

<div id="game" style="display:none">
<div class="info">
<div id="modeDisplay"></div>
<div>ãƒ¬ãƒ™ãƒ«<span id="lv">1</span>/9 - <span id="lvInfo"></span></div>
<div class="progress">
<div class="progress-bar" id="progressBar"></div>
</div>
<div id="levelProgress"></div>
</div>

<div class="level-indicator" id="levelIndicator"></div>

<div class="monster" id="monster">ğŸ“Š</div>
<div class="question" id="q"></div>

<div id="answerSections" class="answer-sections">
<div class="answer-section">
<h3>åˆ†æ•°ã§ç­”ãˆã‚‹</h3>
<div class="fraction-input">
<input type="number" id="numerator" placeholder="åˆ†å­" min="0">
<div class="fraction-line"></div>
<input type="number" id="denominator" placeholder="åˆ†æ¯" min="1">
</div>
<div id="fractionUnit" class="unit-display" style="display:none"></div>
<button class="submit-btn" onclick="submitFraction()">åˆ†æ•°ã§ç­”ãˆã‚‹</button>
</div>

<div class="answer-section" id="mixedSection" style="display:none">
<h3>å¸¯åˆ†æ•°ã§ç­”ãˆã‚‹</h3>
<div class="mixed-input">
<input type="number" id="mixedWhole" placeholder="æ•´æ•°" min="0">
<div class="fraction-input" style="margin:0">
<input type="number" id="mixedNumerator" placeholder="åˆ†å­" min="0">
<div class="fraction-line"></div>
<input type="number" id="mixedDenominator" placeholder="åˆ†æ¯" min="1">
</div>
</div>
<div id="mixedUnit" class="unit-display" style="display:none"></div>
<button class="submit-btn" onclick="submitMixed()">å¸¯åˆ†æ•°ã§ç­”ãˆã‚‹</button>
</div>

<div class="answer-section">
<h3>æ•´æ•°ãƒ»å°æ•°ã§ç­”ãˆã‚‹</h3>
<div class="normal-input">
<input type="text" id="normalAnswer" placeholder="ç­”ãˆã‚’å…¥åŠ›">
<div id="normalUnit" class="unit-display" style="display:none"></div>
</div>
<button class="submit-btn" onclick="submitNormal()">æ•´æ•°ãƒ»å°æ•°ã§ç­”ãˆã‚‹</button>
</div>
</div>

<div id="comparisonInput" style="display:none" class="comparison-options">
<button class="comparison-btn" onclick="submitComparison('left')">å·¦ã®å¼</button>
<button class="comparison-btn" onclick="submitComparison('right')">å³ã®å¼</button>
<button class="comparison-btn" onclick="submitComparison('equal')">åŒã˜</button>
</div>

<div id="wrong" style="display:none">
<p id="wrongMsg">ã¾ã¡ãŒã„ã§ã™ã€‚</p>
<div id="correctAnswerDisplay" class="correct-answer" style="display:none">
<strong>æ­£è§£ï¼š</strong><span id="correctAnswerText"></span>
</div>
<div id="practiceWrongMsg" style="display:none">
<p>ã“ã®ãƒ¬ãƒ™ãƒ«ã®ã‚«ã‚¦ãƒ³ãƒˆãŒ0ã«æˆ»ã‚Šã¾ã™ã€‚é ‘å¼µã£ã¦ï¼</p>
</div>
<button onclick="retry()">ã‚‚ã†ä¸€åº¦</button>
<button onclick="next()">ã¤ãã¸</button>
</div>

<div class="status">
<span>ã‚¹ã‚³ã‚¢: <span id="score">0</span></span>
<span id="totalQuestions" style="display:none"> / 45å•ä¸­</span>
</div>
</div>

<div id="gameover" style="display:none" class="gameover">
<h1>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</h1>
<div class="monster" style="font-size:120px">ğŸ˜µ</div>
<h2>æ®‹å¿µï¼</h2>
<div class="info">
<p>åˆ°é”ãƒ¬ãƒ™ãƒ«: <span id="finalLevel"></span>/9</p>
<p>æ­£è§£æ•°: <span id="finalScore1"></span>å•</p>
</div>
<button onclick="restart()">ã‚‚ã†ä¸€åº¦</button>
</div>

<div id="clear" style="display:none" class="clear-screen">
<h1>ğŸ‰ ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼ ğŸ‰</h1>
<div class="monster" style="font-size:120px">ğŸ‘‘</div>
<h2>ãŠã‚ã§ã¨ã†ï¼å…¨ãƒ¬ãƒ™ãƒ«åˆ¶è¦‡ï¼</h2>
<div class="info">æœ€çµ‚ã‚¹ã‚³ã‚¢: <span id="finalScore2"></span>å•æ­£è§£</div>
<button onclick="restart()">ã‚‚ã†ä¸€åº¦</button>
</div>

<script>
const $=id=>document.getElementById(id);
let score=0,level=1,ans,qNum=0,currentProblem,currentUnit="",gameMode="",levelCorrectCount=0,totalQuestions=0;
const monsters=["ğŸ“Š","ğŸ”¢","ğŸ”²","ğŸ”„","â­","âš–ï¸","ğŸ’¡","ğŸƒ","ğŸ‘‘"];
const levelNames=["åˆ†æ•°Ã—æ•´æ•°","åˆ†æ•°Ã·æ•´æ•°","åˆ†æ•°Ã—åˆ†æ•°","å¸¯åˆ†æ•°Ã—å¸¯åˆ†æ•°","åˆ†æ•°Ã—åˆ†æ•°Ã—åˆ†æ•°","å¤§å°æ¯”è¼ƒ","é€†æ•°","æ™‚é–“ã®åˆ†æ•°","åˆ†æ•°ã®æ–‡ç« é¡Œ"];
const completedLevels=new Set();

function gcd(a,b){return b?gcd(b,a%b):a}
function simplify(n,d){if(d<0){n=-n;d=-d}const g=gcd(Math.abs(n),Math.abs(d));return[n/g,d/g]}
function R(min,max){return Math.floor(Math.random()*(max-min+1))+min}
function randFrac(maxN=10,maxD=10){let n,d;do{n=R(1,maxN);d=R(2,maxD)}while(gcd(n,d)!==1||n>=d);return[n,d]}
function mixed2improper(w,n,d){return[w*d+n,d]}

function frac(n,d){return `<span class="fraction-display"><span class="numerator">${n}</span><span class="fraction-bar"></span><span class="denominator">${d}</span></span>`}

function mixedFrac(w,n,d){
if(n>=d){w+=Math.floor(n/d);n=n%d}
return n===0?`${w}`:`${w} ${frac(n,d)}`;
}

function formatAnswer(n,d,unit=""){
const[sn,sd]=simplify(n,d);
if(sd===1)return sn+unit;
return `${sn}/${sd}`+unit;
}

function selectMode(mode){
gameMode=mode;
$("start").style.display="none";
$("game").style.display="block";
score=0;level=1;qNum=0;levelCorrectCount=0;totalQuestions=0;
completedLevels.clear();
updateDisplay();
updateLevelIndicator();
nextQ();
}

function updateDisplay(){
$("lv").textContent=level;
$("lvInfo").textContent=levelNames[level-1];
$("score").textContent=score;
$("monster").textContent=monsters[level-1];

const progressBar=$("progressBar");

if(gameMode==='practice'){
$("modeDisplay").innerHTML='<div class="mode-info practice"><strong>ğŸ“š ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</strong></div>';
$("levelProgress").textContent=`ã“ã®ãƒ¬ãƒ™ãƒ«: ${levelCorrectCount}/5å•æ­£è§£`;
progressBar.className="progress-bar practice";
progressBar.style.width=`${(levelCorrectCount/5)*100}%`;
$("totalQuestions").style.display="none";
}else{
$("modeDisplay").innerHTML='<div class="mode-info summary"><strong>ğŸ¯ ã¾ã¨ã‚ãƒ¢ãƒ¼ãƒ‰</strong></div>';
$("levelProgress").textContent=`å•é¡Œ ${totalQuestions+1}/45`;
progressBar.className="progress-bar summary";
progressBar.style.width=`${(totalQuestions/45)*100}%`;
$("totalQuestions").style.display="inline";
$("totalQuestions").textContent=" / 45å•ä¸­";
}
}

function updateLevelIndicator(){
const indicator=$("levelIndicator");
indicator.innerHTML="";
for(let i=1;i<=9;i++){
const dot=document.createElement("div");
dot.className="level-dot";
dot.textContent=i;
if(completedLevels.has(i))dot.classList.add("completed");
else if(i===level)dot.classList.add("current");
indicator.appendChild(dot);
}
}

function generateProblem(level){
switch(level){
case 1:{
const[n,d]=randFrac(9,12);
const i=R(2,8);
return{q:`${frac(n,d)} Ã— ${i} =`,n:n*i,d:d,type:'fraction',allowMixed:false};
}
case 2:{
const[n,d]=randFrac(8,10);
const i=R(2,6);
return{q:`${frac(n,d)} Ã· ${i} =`,n:n,d:d*i,type:'fraction',allowMixed:false};
}
case 3:{
const[n1,d1]=randFrac(8,12);
const[n2,d2]=randFrac(8,12);
return{q:`${frac(n1,d1)} Ã— ${frac(n2,d2)} =`,n:n1*n2,d:d1*d2,type:'fraction',allowMixed:false};
}
case 4:{
const w1=R(1,3),d1=R(3,6);
const n1=R(1,d1-1);
const w2=R(1,2),d2=R(3,5);
const n2=R(1,d2-1);
const[i1,id1]=mixed2improper(w1,n1,d1);
const[i2,id2]=mixed2improper(w2,n2,d2);
return{q:`${mixedFrac(w1,n1,d1)} Ã— ${mixedFrac(w2,n2,d2)} =`,n:i1*i2,d:id1*id2,type:'fraction',allowMixed:true};
}
case 5:{
const[n1,d1]=randFrac(6,8);
const[n2,d2]=randFrac(6,8);
const[n3,d3]=randFrac(6,8);
return{q:`${frac(n1,d1)} Ã— ${frac(n2,d2)} Ã— ${frac(n3,d3)} =`,n:n1*n2*n3,d:d1*d2*d3,type:'fraction',allowMixed:false};
}
case 6:{
const[n1,d1]=randFrac(8,12);
const[n2,d2]=randFrac(8,12);
const val1=n1/d1,val2=n2/d2;
const mult=R(2,4);
const patterns=[
{expr1:`${frac(n1,d1)} Ã— ${frac(n2,d2)}`,expr2:`${frac(n1,d1)}`,v1:val1*val2,v2:val1},
{expr1:`${frac(n1,d1)} Ã— ${mult}`,expr2:`${frac(n1,d1)}`,v1:val1*mult,v2:val1}
];
const p=patterns[R(0,1)];
let answer=Math.abs(p.v1-p.v2)<0.0001?'equal':p.v1>p.v2?'left':'right';
return{q:`${p.expr1} ã¨ ${p.expr2} ã©ã¡ã‚‰ãŒå¤§ãã„ã§ã™ã‹ï¼Ÿ`,a:answer,type:'comparison',allowMixed:false};
}
case 7:{
const[n,d]=randFrac(8,12);
return{q:`${frac(n,d)} ã®é€†æ•°ã‚’æ±‚ã‚ã¾ã—ã‚‡ã†`,n:d,d:n,type:'fraction',allowMixed:false};
}
case 8:{
const problems=[
()=>{const m=R(10,50);return{q:`${m}åˆ†ã¯ä½•æ™‚é–“ã§ã™ã‹ï¼Ÿ`,n:m,d:60,unit:"æ™‚é–“",type:'fraction',allowMixed:false}},
()=>{const s=R(15,55);return{q:`${s}ç§’ã¯ä½•åˆ†ã§ã™ã‹ï¼Ÿ`,n:s,d:60,unit:"åˆ†",type:'fraction',allowMixed:false}},
()=>{const h=R(15,45);return{q:`${h}æ™‚é–“ã¯ä½•æ—¥ã§ã™ã‹ï¼Ÿ`,n:h,d:24,unit:"æ—¥",type:'fraction',allowMixed:false}}
];
return problems[R(0,2)]();
}
case 9:{
const problems=[
()=>{
const total=R(12,24);
const[n,d]=randFrac(4,8);
return{q:`${total}å€‹ã®ãŠè“å­ã®${frac(n,d)}ã¯ä½•å€‹ã§ã™ã‹ï¼Ÿ`,n:total*n,d:d,unit:"å€‹",type:'fraction',allowMixed:true};
},
()=>{
const total=R(6,15);
const divisor=R(2,5);
return{q:`${total}å€‹ã®ã‚Šã‚“ã”ã‚’${divisor}äººã§ç­‰ã—ãåˆ†ã‘ã‚‹ã¨ã€1äººã‚ãŸã‚Šä½•å€‹ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ`,n:total,d:divisor,unit:"å€‹",type:'fraction',allowMixed:true};
},
()=>{
const[n,d]=randFrac(6,10);
const whole=R(8,20);
return{q:`${whole}mã®ãƒªãƒœãƒ³ã®${frac(n,d)}ã®é•·ã•ã¯ä½•mã§ã™ã‹ï¼Ÿ`,n:whole*n,d:d,unit:"m",type:'fraction',allowMixed:false};
}
];
return problems[R(0,2)]();
}
}
}

function nextQ(){
if(gameMode==='practice'){
if(levelCorrectCount>=5){
completedLevels.add(level);
if(level>=9){showClear();return}
level++;levelCorrectCount=0;
$("monster").classList.add("level-up");
setTimeout(()=>$("monster").classList.remove("level-up"),2000);
updateLevelIndicator();
}
}else{
if(level>=9&&qNum>=5){showClear();return}
if(qNum>=5){
completedLevels.add(level);level++;qNum=0;
$("monster").classList.add("level-up");
setTimeout(()=>$("monster").classList.remove("level-up"),2000);
updateLevelIndicator();
}
}

currentProblem=generateProblem(level);
$("q").innerHTML=currentProblem.q;
currentUnit=currentProblem.unit||"";

if(currentProblem.type==='comparison'){
ans=currentProblem.a;
}else{
ans=formatAnswer(currentProblem.n,currentProblem.d,currentUnit);
}

clearInputs();
$("wrong").style.display="none";

if(currentProblem.type==='comparison'){
$("answerSections").style.display="none";$("comparisonInput").style.display="block";
}else{
$("answerSections").style.display="flex";$("comparisonInput").style.display="none";
}

if(currentProblem.allowMixed)$("mixedSection").style.display="block";
else $("mixedSection").style.display="none";

if(currentUnit){
$("fractionUnit").textContent=currentUnit;$("fractionUnit").style.display="block";
$("mixedUnit").textContent=currentUnit;$("mixedUnit").style.display="block";
$("normalUnit").textContent=currentUnit;$("normalUnit").style.display="block";
}else{
$("fractionUnit").style.display="none";$("mixedUnit").style.display="none";$("normalUnit").style.display="none";
}
updateDisplay();$("numerator").focus();
}

function clearInputs(){
$("numerator").value="";$("denominator").value="";$("mixedWhole").value="";$("mixedNumerator").value="";$("mixedDenominator").value="";$("normalAnswer").value="";
}

function submitFraction(){
const num=parseInt($("numerator").value)||0;
const den=parseInt($("denominator").value)||1;
if(den===0){alert("åˆ†æ¯ã¯0ã«ã§ãã¾ã›ã‚“");return}
const userAns=formatAnswer(num,den,currentUnit);
checkAnswer(userAns);
}

function submitMixed(){
const whole=parseInt($("mixedWhole").value)||0;
const num=parseInt($("mixedNumerator").value)||0;
const den=parseInt($("mixedDenominator").value)||1;
if(den===0){alert("åˆ†æ¯ã¯0ã«ã§ãã¾ã›ã‚“");return}
if(num===0&&whole===0){alert("ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}
const[improperNum,improperDen]=mixed2improper(whole,num,den);
const userAns=formatAnswer(improperNum,improperDen,currentUnit);
checkAnswer(userAns);
}

function submitNormal(){
let userAns=$("normalAnswer").value.trim();
if(currentUnit)userAns+=currentUnit;
if(currentProblem.type!=='comparison'){
const userDecimal=parseFloat($("normalAnswer").value);
const correctDecimal=currentProblem.n/currentProblem.d;
if(!isNaN(userDecimal)&&Math.abs(userDecimal-correctDecimal)<0.0001){
checkAnswer(ans);return;
}
}
checkAnswer(userAns);
}

function submitComparison(choice){checkAnswer(choice)}

function checkAnswer(userAns){
const isCorrect=userAns===ans||userAns==ans||
(currentProblem.type!=='comparison'&&parseFloat(userAns)===parseFloat(ans));

if(isCorrect){
score++;
if(gameMode==='practice')levelCorrectCount++;
else{qNum++;totalQuestions++}
$("monster").classList.add("correct");
setTimeout(()=>$("monster").classList.remove("correct"),1000);
setTimeout(nextQ,1500);
}else{
if(gameMode==='practice'){
levelCorrectCount=0;$("practiceWrongMsg").style.display="block";
}else{showGameOver();return}
$("monster").classList.add("wrong");
setTimeout(()=>$("monster").classList.remove("wrong"),1000);
$("answerSections").style.display="none";$("comparisonInput").style.display="none";$("wrong").style.display="block";
if(gameMode==='practice')$("wrongMsg").textContent="ã¾ã¡ãŒã„ã§ã™ã€‚ã“ã®ãƒ¬ãƒ™ãƒ«ã®ã‚«ã‚¦ãƒ³ãƒˆãŒ0ã«æˆ»ã‚Šã¾ã™ã€‚";
}
}

function retry(){
if(currentProblem.type==='comparison')$("comparisonInput").style.display="block";
else $("answerSections").style.display="flex";
$("wrong").style.display="none";$("practiceWrongMsg").style.display="none";
clearInputs();
updateDisplay();$("numerator").focus();
}

function next(){
$("correctAnswerDisplay").innerHTML=`<strong>æ­£è§£ï¼š</strong>${ans}`;
$("correctAnswerDisplay").style.display="block";
setTimeout(()=>{
if(gameMode==='summary'){qNum++;totalQuestions++}
nextQ();
},2000);
}

function showGameOver(){
$("game").style.display="none";
$("gameover").style.display="block";
$("finalLevel").textContent=level;
$("finalScore1").textContent=score;
}

function showClear(){
$("game").style.display="none";
$("clear").style.display="block";
$("finalScore2").textContent=score;
}

function restart(){
$("gameover").style.display="none";
$("clear").style.display="none";
$("start").style.display="block";
}
</script>
</body>
</html>
